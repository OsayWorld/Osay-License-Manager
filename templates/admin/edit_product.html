{% extends 'admin/admin_base.html' %}

{% block content %}
    <h1>Edit Product</h1>

    <form method="POST" enctype="multipart/form-data">
        <!-- Product Name -->
        <div class="mb-3">
            <label for="name" class="form-label">Product Name</label>
            <input type="text" class="form-control" id="name" name="name" value="{{ product.name }}" required>
        </div>

        <!-- Product Type -->
        <div class="mb-3">
            <label for="product_type" class="form-label">Product Type</label>
            <input type="text" class="form-control" id="product_type" name="product_type" value="{{ product.product_type }}" required>
        </div>

        <!-- Price -->
        <div class="mb-3">
            <label for="price" class="form-label">Price (in USD)</label>
            <input type="number" class="form-control" id="price" name="price" value="{{ product.price }}" required>
        </div>

        <!-- License Duration Days -->
        <div class="mb-3">
            <label for="license_duration_days" class="form-label">License Duration (Days)</label>
            <input type="number" class="form-control" id="license_duration_days" name="license_duration_days" value="{{ product.license_duration_days }}" required>
        </div>

        <!-- Description -->
        <div class="mb-3">
            <label for="description" class="form-label">Description</label>
            <textarea class="form-control" id="description" name="description" rows="3">{{ product.description }}</textarea>
        </div>

        <!-- Category -->
        <div class="mb-3">
            <label for="category" class="form-label">Category</label>
            <select class="form-select" id="category" name="category">
                {% for key, value in PRODUCT_CATEGORIES.items() %}
                    <option value="{{ key }}" {% if product.category == key %}selected{% endif %}>{{ value }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Platform -->
        <div class="mb-3">
            <label for="platform" class="form-label">Platform</label>
            <input type="text" class="form-control" id="platform" name="platform" value="{{ product.platform }}" required>
        </div>

        <!-- Purchase Link -->
        <div class="mb-3">
            <label for="purchase_link" class="form-label">Purchase Link</label>
            <input type="url" class="form-control" id="purchase_link" name="purchase_link" value="{{ product.purchase_link }}" placeholder="Enter purchase link (optional)">
        </div>

        <!-- Remote Control Enabled -->
        <div class="mb-3">
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="remote_control_enabled" name="remote_control_enabled" {% if product.remote_control_enabled %}checked{% endif %}>
                <label class="form-check-label" for="remote_control_enabled">Enable Remote Control</label>
            </div>
        </div>

        <!-- Optional fields (version, rating, discount, etc.) -->
        <div class="mb-3">
            <label for="version" class="form-label">Version</label>
            <input type="text" class="form-control" id="version" name="version" value="{{ product.version }}">
        </div>
        
        <div class="mb-3">
            <label for="rating" class="form-label">Rating</label>
            <input type="number" class="form-control" id="rating" name="rating" value="{{ product.rating }}" step="0.1" min="0" max="5">
        </div>
        
        <div class="mb-3">
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="is_discounted" name="is_discounted" {% if product.is_discounted %}checked{% endif %}>
                <label class="form-check-label" for="is_discounted">Is Discounted</label>
            </div>
        </div>

        <div class="mb-3">
            <label for="discount_percentage" class="form-label">Discount Percentage</label>
            <input type="number" class="form-control" id="discount_percentage" name="discount_percentage" value="{{ product.discount_percentage }}" min="0" max="100">
        </div>

        <!-- File Uploads -->
        <div class="mb-3">
            <label for="download_file" class="form-label">Download File (Optional)</label>
            <input type="file" class="form-control" id="download_file" name="download_file" accept=".txt,.pdf,.zip,.apk,.exe">
        </div>

        <div class="mb-3">
            <label for="image_file" class="form-label">Image File (Optional)</label>
            <input type="file" class="form-control" id="image_file" name="image_file" accept=".png,.jpg,.jpeg,.gif">
        </div>

        <div class="mb-3">
            <label for="apk_file" class="form-label">APK File (Optional)</label>
            <input type="file" class="form-control" id="apk_file" name="apk_file" accept=".apk">
        </div>

        <div class="mb-3">
            <label for="online_update_file" class="form-label">Online Update File (Optional)</label>
            <input type="file" class="form-control" id="online_update_file" name="online_update_file" accept=".zip">
        </div>

        <div class="mb-3">
            <label for="offline_update_file" class="form-label">Offline Update File (Optional)</label>
            <input type="file" class="form-control" id="offline_update_file" name="offline_update_file" accept=".zip">
        </div>

        <div class="mb-3">
            <label for="script_file" class="form-label">Script File (Optional)</label>
            <input type="file" class="form-control" id="script_file" name="script_file" accept=".sh,.bat,.cmd,.py">
        </div>

        <div class="mb-3">
            <label for="remote_start_file" class="form-label">Remote Start File (Optional)</label>
            <input type="file" class="form-control" id="remote_start_file" name="remote_start_file" accept=".exe,.bat,.sh">
        </div>

        <div class="mb-3">
            <label for="remote_stop_file" class="form-label">Remote Stop File (Optional)</label>
            <input type="file" class="form-control" id="remote_stop_file" name="remote_stop_file" accept=".exe,.bat,.sh">
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn btn-success">Save Changes</button>
        <a href="{{ url_for('admin.manage_products') }}" class="btn btn-secondary">Cancel</a>
    </form>
{% endblock %}
